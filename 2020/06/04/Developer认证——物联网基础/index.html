<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="IoT,华为," />










<meta name="description" content="HCIP-IoT Developer认证——物联网基础一、物联网概述物联网简介物联网（Internet of Things）概念最早于1999年由美国MIT提出，早期的物联网是指依托RFID（Radio Frequency Identification）技术和设备，按约定的通信协议与互联网结合，使物品信息实现智能化识别和管理，实现物品信息互联、可交换和共享而形成的网络。 物联网是新一代信息技术的重">
<meta property="og:type" content="article">
<meta property="og:title" content="Developer认证——物联网基础">
<meta property="og:url" content="http://www.artangnis.top/2020/06/04/Developer%E8%AE%A4%E8%AF%81%E2%80%94%E2%80%94%E7%89%A9%E8%81%94%E7%BD%91%E5%9F%BA%E7%A1%80/index.html">
<meta property="og:site_name" content="Artangnis&#39;s Blog">
<meta property="og:description" content="HCIP-IoT Developer认证——物联网基础一、物联网概述物联网简介物联网（Internet of Things）概念最早于1999年由美国MIT提出，早期的物联网是指依托RFID（Radio Frequency Identification）技术和设备，按约定的通信协议与互联网结合，使物品信息实现智能化识别和管理，实现物品信息互联、可交换和共享而形成的网络。 物联网是新一代信息技术的重">
<meta property="article:published_time" content="2020-06-03T18:24:10.000Z">
<meta property="article:modified_time" content="2020-06-03T18:26:23.933Z">
<meta property="article:author" content="阿汤尼斯">
<meta property="article:tag" content="IoT">
<meta property="article:tag" content="华为">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":true,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.artangnis.top/2020/06/04/Developer认证——物联网基础/"/>





  <title>Developer认证——物联网基础 | Artangnis's Blog</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?409228f35d302e1d40ffd493b87acc81";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css">
  <script src="https://cdn.jsdelivr.net/gh/artangnis/live2d-widget@latest/autoload.js"></script>
<meta name="generator" content="Hexo 4.2.0"></head>

<script src="/live2d-widget/autoload.js"></script>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Artangnis's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.artangnis.top/2020/06/04/Developer%E8%AE%A4%E8%AF%81%E2%80%94%E2%80%94%E7%89%A9%E8%81%94%E7%BD%91%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="阿汤尼斯">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/teriri.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Artangnis's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Developer认证——物联网基础</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-06-04T02:24:10+08:00">
                2020-06-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="HCIP-IoT-Developer认证——物联网基础"><a href="#HCIP-IoT-Developer认证——物联网基础" class="headerlink" title="HCIP-IoT Developer认证——物联网基础"></a>HCIP-IoT Developer认证——物联网基础</h1><h2 id="一、物联网概述"><a href="#一、物联网概述" class="headerlink" title="一、物联网概述"></a>一、物联网概述</h2><h3 id="物联网简介"><a href="#物联网简介" class="headerlink" title="物联网简介"></a>物联网简介</h3><p>物联网（Internet of Things）概念最早于<strong>1999年</strong>由美国MIT提出，早期的物联网是指依托RFID（Radio Frequency Identification）技术和设备，按约定的通信协议与互联网结合，使物品信息实现智能化识别和管理，实现物品信息互联、可交换和共享而形成的网络。</p>
<p>物联网是新一代信息技术的重要组成部分，也是“信息化”时代的重要发展阶段。物联网通过智能感知、识别技术与普适计算等通信感知技术，广泛应用于网络的融合中，也因此被称为继计算机、互联网之后世界信息产业发展的第三次浪潮。</p>
<p>通过二维码识读设备、射频识别（RFID）装置、红外感应装置、全球定位系统和激光扫描器等信息传感设备，按约定的协议，把<strong>任何物品与互联网相连接</strong>，进行信息交换和通信，以实现智能化识别、定位、跟踪、监控和管理的一种网络。                                                                                                  ——国际电信联盟（ITU）</p>
<p>物联网就是<strong>物物相连</strong>的互联网，这其中有两层意思：其一，物联网的核心和基础仍然是互联网，是在互联网的基础上的延伸和扩展的网络；其二，其用户端延伸和扩展到了任何物品与物品之间，进行信息交换和通信，也就是物物相息。                                                                                                                  ——百度百科</p>
<h3 id="主流物联网接入技术应用场景划分"><a href="#主流物联网接入技术应用场景划分" class="headerlink" title="主流物联网接入技术应用场景划分"></a>主流物联网接入技术应用场景划分</h3><table>
<thead>
<tr>
<th align="center">接入技术</th>
<th align="center">特点</th>
<th align="center">业务应用</th>
</tr>
</thead>
<tbody><tr>
<td align="center">4G/5G/LTE-V</td>
<td align="center">传输速率&gt;10Mbps，功耗较高</td>
<td align="center">车联网、视频监控、智能机器等</td>
</tr>
<tr>
<td align="center">eMTC/GPRS</td>
<td align="center">传输速率&lt;1Mbps，成本较低，功耗较低</td>
<td align="center">穿戴、车辆调度、电子广告、无线ATM等</td>
</tr>
<tr>
<td align="center">NB-IoT</td>
<td align="center">传输速率&lt;100Kbps，成本低，功耗低，覆盖广</td>
<td align="center">远程抄表、公共事业、农林渔牧、数据采集等</td>
</tr>
</tbody></table>
<h3 id="物联网层次架构"><a href="#物联网层次架构" class="headerlink" title="物联网层次架构"></a>物联网层次架构</h3><p>物联网的层次架构可以分为<strong>端</strong>（信息收集和信号处理）、<strong>边</strong>（IoT 边缘）、<strong>管</strong>（接入和传输网络）、<strong>云</strong>（解决数据如何存储、检索、使用、业务规划、安全、维护、费用等）、<strong>行业应用</strong>（数据呈现及客户交互）；也可分为感知层、网络层、平台层和应用层。</p>
<h3 id="物联网产业发展面临的主要挑战"><a href="#物联网产业发展面临的主要挑战" class="headerlink" title="物联网产业发展面临的主要挑战"></a>物联网产业发展面临的主要挑战</h3><ol>
<li>新业务上线周期长（应用碎片化，开发周期长，产品上市慢）</li>
<li>终端/传感器厂家众多导致集成困难</li>
<li>网络联接复杂</li>
</ol>
<h2 id="二、华为IoT联接管理平台——Oceanconnect"><a href="#二、华为IoT联接管理平台——Oceanconnect" class="headerlink" title="二、华为IoT联接管理平台——Oceanconnect"></a>二、华为IoT联接管理平台——Oceanconnect</h2><h3 id="华为IoT联接平台概述"><a href="#华为IoT联接平台概述" class="headerlink" title="华为IoT联接平台概述"></a>华为IoT联接平台概述</h3><p>发展物联网业务需要一个终端<strong>接入解耦</strong>、<strong>平台与应用分离（能力开放）</strong>、<strong>安全可靠</strong>的平台作为支撑；华为IoT联接管理平台Oceanconnect具有终端接入、安全验证、业务编排、数据管理、多协议通信的功能，能实现连接管理和能力开放，并完成与运营商管道和平台对接。</p>
<h3 id="Oceanconnect产品架构"><a href="#Oceanconnect产品架构" class="headerlink" title="Oceanconnect产品架构"></a>Oceanconnect产品架构</h3><ol>
<li>华为“IoT全栈”解决方案（1+2+1）：一个统一的物联网平台、两种网络接入方式、一个统一的操作系统。</li>
<li>典型组网：应用使能平台服务（AEP）、通用应用使能服务（CAES）、车联网服务（Vehicle）、数据分析服务（DAS）、设备管理服务（DMP）、云平台服务（CSP）、设备接入和能力开放等。</li>
<li>功能架构：<strong>终端层</strong>（提供标准IoT Agent，能够快速适配OS和各类厂商的智能终端）、<strong>接入层</strong>（包括接入网络和接入协议，通过IoT Agent适配不同厂商的传感器，以便于接入海量设备）、<strong>设备连接层</strong>（主要提供统一的接入能力、资产和设备管理、SIM卡连接管理等功能）、<strong>设备管理层及业务使能层</strong>（提供API开放网关、数据管理、规则引擎等功能）、<strong>应用层</strong>（支持多种Open API形式，支持预集成多个行业应用，主要包括智慧园区、车联网、智慧城市和第三方应用）。</li>
</ol>
<h3 id="Oceanconnect业务与功能"><a href="#Oceanconnect业务与功能" class="headerlink" title="Oceanconnect业务与功能"></a>Oceanconnect业务与功能</h3><ol>
<li><p><strong>设备管理</strong></p>
</li>
<li><p><strong>设备（网关）通信管理</strong></p>
<p>设备登录：即网关的接入登录。</p>
<p>数据通信：即网关到Oceanconnect间的数据通信管理（基于MQTT连接），Oceanconnect和终端的数据通信路径的建立和维护，实现连接状态变化的感知，IoT平台与网关间数据的交换。</p>
<p>设备订阅：即用户数据到网关的连接管理，网关通过到Oceanconnect的订阅，实现网关对用户（SP用户/最终用户）数据的监控，用户对终端下发的命令实时通过IoT平台转发给网关。</p>
<p>用户订阅：即网关数据到用户的连接管理，用户通过到IoT平台的订阅，实现用户对网关的监控，网关实时上报的数据通过Oceanconnect转发给用户。</p>
<p>用户订阅</p>
</li>
<li><p><strong>设备接入鉴权</strong></p>
<p>创建传感器鉴权：当有新的传感器接入时，网关携带平台分配的合法会话信息创建传感器，IoT平台对其他合法性进行检查，检查通过后，将新的传感器加入到网关下面，以便进行传感器的数据上报功能。</p>
<p>设备接入鉴权：网关启动后，设备携带Device ID和密码接入Oceanconnect，Oceanconnect对其鉴权确认合法性，如果合法则返回200 OK，携带为其分配的合法性会话信息，设备完成登录。</p>
<p>上报数据鉴权：当传感器通过网关上报数据时，网关携带IoT平台分配的合法信息上报传感器数据，IoT平台对其合法性进行检查，检查通过后，将传感器数据记录在IoT平台并上报给最终用户。</p>
</li>
<li><p><strong>规则引擎</strong>：使用对象是终端用户，可以定位处理各种事件，利用规则引擎可以完成异常事件的及时通知和快速处理，帮助用户维护和监控设备，保证系统业务的及时恢复。</p>
</li>
<li><p><strong>数据转发</strong></p>
</li>
<li><p><strong>数据转发</strong></p>
</li>
<li><p><strong>API开放管理</strong></p>
</li>
<li><p><strong>多租户管理</strong></p>
</li>
<li><p><strong>Portal管理</strong></p>
</li>
</ol>
<h3 id="Oceanconnect产品特点"><a href="#Oceanconnect产品特点" class="headerlink" title="Oceanconnect产品特点"></a>Oceanconnect产品特点</h3><ol>
<li><strong>接入无关</strong>：任意方式连接、任意设备连接；</li>
<li><strong>可靠性</strong>：系统可靠性、网络可靠性、业务可靠性、模块可靠性；</li>
<li><strong>安全性</strong>：业务安全、平台安全、接入安全、传感器安全；</li>
<li><strong>能力开放</strong>：平台向上API开放、平台向下Agent开放、预集成高价值行业、终端管理平台开放；</li>
<li><strong>弹性伸缩</strong></li>
</ol>
<h3 id="Oceanconnect关键特性"><a href="#Oceanconnect关键特性" class="headerlink" title="Oceanconnect关键特性"></a>Oceanconnect关键特性</h3><ol>
<li><p><strong>设备接入：提供支持设备接入平台的能力，支持多种协议接入及多宗接入方式</strong></p>
<p>IoT平台通过引入CIG（Cloud Inter-Networking Gateway，云端接入网关），解决不同类型、不同通信协议的设备接入IoT平台的问题。CIG通过将各种不同的南向协议发送的消息转换为平台可以识别的Json格式。除CIG之外，直连设备还可以通过集成Agent Lite（瘦网关）快速接入平台，实现数据上报和命令下发等功能。</p>
<p>目前IoT平台支持使用以下原生协议接入：</p>
<ul>
<li><p><strong>LWM2M over CoAP</strong>原生协议接入：主要面向基于蜂窝的窄带物联网（NB-IoT）场景下物联网应用，具有覆盖广、连接多、速率低、成本低、功耗低等特点。</p>
</li>
<li><p><strong>MQTT/MQTTS</strong>原生协议接入：主要应用于计算能力有限，且工作在低带宽、不可靠的网络的远程传感器和控制设备。</p>
</li>
</ul>
</li>
<li><p><strong>应用集成：提供行业应用接入平台的能力，通过API实现平台能力开放</strong></p>
<p><strong>应用注册鉴权</strong>：SP用户基于华为的IoT平台开发物联网应用，首先需要再IoT平台的管理门户上，根据自身行业应用的特征申请平台资源，获取注册鉴权信息（包括应用ID、应用密钥），确保每个SP用户合法的接入到平台，合法的享用平台资源，高效地利用平台提供的服务套件进行应用开发。</p>
<p><strong>订阅通知</strong>：行业应用通过API接口向IoT平台进行订阅，告知IoT平台行业应用需要收到收到的通知类型，比如绑定设备，设备数据变化，升级状态变化等。当平台中设备的相关信息有更新时，平台会通过<strong>HTTP/HTTPS</strong>协议向应用侧推送消息。</p>
<p>在推送场景下，IoT平台是客户端，应用服务器是服务端，IoT平台调用应用服务器的接口，并向服务端，IoT平台调用应用服务器的接口，并向应用服务器推送消息。此时，如果订阅的回调地址为HTTPS地址，则需要再物联网上传CA证书，CA证书由应用服务器侧提供。</p>
<p><strong>北向Restful API</strong>：当前IoT平台对外提供了应用安全接入、设备管理、批量处理、订阅管理、命令下发、数据采集、设备组管理、设备升级等开放API。</p>
</li>
<li><p><strong>设备管理：提供平台对设备和设备数据的操作管理能力</strong></p>
<p><strong>设备发放</strong>，即设备注册，指SP用户通过管理门户或通过调用注册设备API在IoT平台中注册设备信息，平台中存在设备信息后，再接入真实的实体设备，这样平台与终端实体设备可以实现连接和通信。</p>
<p><strong>设备接入鉴权</strong>，是指IoT平台对接入平台的设备进行鉴权认证，鉴权内容包括设备接入信息的完整性和安全性、设备与平台消息传输完整性和安全性。</p>
<p><strong>设备访问授权</strong>，IoT平台支持应用间的授权操作，包括同一个SP用户下的不同应用之间授权、不同SP用户下的不同应用之间授权。被授权的应用可以通过管理门户查看和操作授权应用下的所有设备。</p>
<p><strong>设备数据采集</strong>，IoT平台提供设备数据采集功能，支持对设备数据的订阅，应用向IoT平台进行设备数据订阅，当设备上报数据时，平台会向应用推送消息；支持查看设备上报的历史数据，可通过管理门户或者调用API查看设备的历史数据。</p>
<p><strong>设备影子</strong>，IoT平台支持创建设备的“影子”，用于存储设备上报的最新数据（report区）和应用对设备属性的最新配置数据（desired区）。</p>
<ul>
<li><p>report区</p>
<p>当IoT平台获取到设备真实数据时，会将真实数据同步到设备影子的report区；当设备不在线时，可以通过设备影子获取最新数据。</p>
</li>
<li><p>desired区</p>
<p>设备在线时，设备影子的desired区数据会即时同步到设备；设备不在线时，设备影子的desired区数据会在设备上线后同步到设备。</p>
</li>
</ul>
<blockquote>
<p>仅LWM2M协议设备支持设备影子功能。</p>
<p>仅支持修改LWM2M协议定义的属性信息，用户自定义的设备属性信息暂不支持修改。</p>
</blockquote>
<p><strong>命令下发</strong>，IoT平台提供两种命令下发机制：</p>
<ul>
<li><strong>立即下发</strong>：IoT平台立即发送收到的命令，如果设备不在线则下发失败；</li>
<li><strong>缓存下发</strong>：IoT平台收到命令后放入队列，在设备上线的时候，平台依次下发命令队列中的命令。</li>
</ul>
<p><strong>设备远程诊断</strong>，IoT平台支持用户对接入平台的设备（当前仅支持NB-IoT设备）进行远程维护操作：</p>
<ul>
<li><strong>日志收集</strong>：系统通过日志管理服务对用户操作和系统运行痕迹进行记录，有助于迅速定位问题及快速恢复故障，使运维工程师更精确、更高效地进行设备日常维护。</li>
<li><strong>远程重启</strong>：当需要对设备或者模组进行重启操作时，可通过管理门户，选择需要重启的设备或者模组进行重新操作。</li>
</ul>
<p><strong>设备升级策略管理</strong>，IoT平台支持对软件和固件升级的相关策略管理：</p>
<ul>
<li><strong>升级时间策略管理</strong>：用户在进行升级操作时，可以灵活的设置软件和固件升级的时间，提前根据设备和业务的间隙期选择升级时间；</li>
<li><strong>升级并发数控制</strong>：IoT平台支持根据设备无线信号覆盖情况对升级并发数进行控制，IoT平台将设备无线覆盖等级分为3个等级（0、1和2），并预置每个等级的无线覆盖强度（RSRP）门限值和信噪比（SINR）门限值，根据无线信号的覆盖强度，进行设备升级。</li>
</ul>
<p><strong>设备固件升级及设备软件升级</strong>：</p>
<ul>
<li>设备固件升级（FOTA）是通过OTA（Over the Air）的方式对设备的模组进行升级，基于LWM2M标准协议实现。</li>
<li>设备软件升级（SOTA）是通过OTA的方式对终端设备的MCU进行升级，基于华为定义的PCP升级协议实现。</li>
</ul>
</li>
<li><p><strong>NB-IoT云网协同：通过与核心网网元对接，实现对NB-IoT设备的优化控制</strong></p>
<p><strong>DTLS+</strong>：DTLS+（Datagram Transport Layer Security，数据报传输层安全性协议）是华为IoT平台采用的数据报传输层安全协议，相比传统DTLS协议，在会话协商等方面做了优化，减少了NB-IoT设备与IoT平台通信过程中的握手次数，从而延长终端电池的使用寿命。</p>
<p><strong>NB-IoT设备省电模式</strong>：</p>
<ul>
<li><p><strong>PSM</strong>：最省电的模式，设备非业务期间深度休眠，不接收下行数据，只有设备主动发送上行数据时可接收IoT平台缓存的下行数据，适合对下行数据无时延要求的业务；</p>
</li>
<li><p><strong>DRX</strong>：不连续接收模式，最耗电的模式，在每个DRX周期，设备都会检测一次是否有下行业务到达，适用于对时延有高要求的业务，设备一般采取供电的方式；</p>
</li>
<li><p><strong>eDRX</strong>：扩展不连续接收模式，设备兼顾低功耗和对时延有一定要求的业务，在每个eDRX周期内，只有在设置的寻呼时间窗口内，终端可接收下行数据，其余时间终端处于休眠状态，不接收下行数据。</p>
</li>
</ul>
<p><strong>NB-IoT上行拥塞控制</strong>：当有大量NB-IoT设备同时上线时，容易造成网络拥塞。IoT平台通过NB-IoT上行离散控制功能，统一为设备分配上线时间，让设备可以错峰接入，提高设备上线率。</p>
<p><strong>NB-IoT下行拥塞控制</strong>：NB-IoT基站的空口寻呼能力资源有限，当需要为重要业务预留资源或者网络即将发生拥塞时，IoT平台针对立即下发及缓存下发两种请求，实时下行拥塞控制，减少从IoT平台或应用下发到网络侧的寻呼数，从而实现网络拥塞控制目标。</p>
<ul>
<li>针对立即下发的下行消息，如果基站小区寻呼并发数超过小区阈值时，则直接拒绝该请求，减少下发的下行消息数量。</li>
<li>针对缓存下发的下行消息，如果基站小区寻呼并发数超过小区阈值时，则排队等待，延迟下行消息的下发时间。</li>
</ul>
</li>
<li><p><strong>第三方系统集成：提供与第三方系统的对接能力</strong></p>
<p><strong>短信系统对接和邮件系统对接</strong>：IoT平台支持与现网的短信系统（或邮件系统）通过SMPP协议（邮件系统为SMTP协议）进行对接，以便用户在IoT平台上进行相关业务操作（如SP账号的注册、密码找回等）时，可以将信息通过短信（或邮件）的形式发送给用户。</p>
</li>
<li><p><strong>运营运维：通过管理门户提供对平台的运营操作管理</strong></p>
<p><strong>审计日志</strong>：用户在使用IoT平台的过程中，系统会以日志形式收集并记录用户及平台的操作结果，当某项功能发生异常时，用户可以根据日志的记录信息定位并处理故障问题。</p>
<ul>
<li><strong>操作日志</strong>：记录用户和系统所做的操作和结果，如导出配置、删除配置等，用于跟踪和审计。</li>
<li><strong>安全日志</strong>：记录涉及系统安全操作信息，如创建用户登录、用户确认隐私声明等，用户了解系统安全操作相关信息，及时发现潜在的安全隐患并进行处理。</li>
<li><strong>个人数据查询日志</strong>：记录用户对账户进行的操作和结果，如查询用户详情、查询登录历史、查询全局用户列表等，用于跟踪和安全审计。</li>
<li><strong>业务日志</strong>：记录涉及平台业务的操作及结果，例如创建设备、南向设备登录等，用于跟踪南北向业务相关信息，及时发现问题并处理。</li>
</ul>
</li>
</ol>
<h2 id="三、华为Oceanconnect端到端开发"><a href="#三、华为Oceanconnect端到端开发" class="headerlink" title="三、华为Oceanconnect端到端开发"></a>三、华为Oceanconnect端到端开发</h2><blockquote>
<p>本章内容包含从NB终端设备到应用服务完整的开发流程，包括IoT平台北向接口调用机制和方法，数据上报和命令下发的流程和规范，设备描述文件和编码插件的开发流程，以及NB终端设备与平台的联通机制。IoT云平台作为一个联接管理平台，不但连通了终端设备和北向应用服务的数据通道，而且规范了数据交互流程和格式，保证了数据服务的完整性和可扩展性。</p>
</blockquote>
<h3 id="整体方案介绍"><a href="#整体方案介绍" class="headerlink" title="整体方案介绍"></a>整体方案介绍</h3><p>上行消息：解析CoAP报文得到应用层数据→调用设备厂商profile和插件解码→消息送达应用平台</p>
<p>下行消息：下发消息→调用设备厂商提供的profile和编解码插件编码→组装CoAP消息发送到设备</p>
<h3 id="北向业务服务开发"><a href="#北向业务服务开发" class="headerlink" title="北向业务服务开发"></a>北向业务服务开发</h3><ol>
<li>北向接入机制：REST（Representational State Transfer，简称REST）描述了一个架构样式的网络系统，即指的是一组架构约束条件和原则，满足这些约束条件和原则的应用程序或设计就是RESTful。</li>
<li>北向API：应用安全接入、设备管理、批量处理、订阅管理、消息推送、命令下发、数据采集、设备组管理、设备升级</li>
</ol>
<h3 id="设备Profile描述文件"><a href="#设备Profile描述文件" class="headerlink" title="设备Profile描述文件"></a>设备Profile描述文件</h3><p>设备的Profile文件是用来<strong>描述设备类型和设备服务能力</strong>的文件，它定义了设备具备的服务能力，每个服务具备的属性、命令以及命令的参数。</p>
<ol>
<li>设备能力（Device Capability）描述一款设备的能力特征，包括设备类型、厂商、型号、协议类型以及提供的服务类型。</li>
<li>服务（Service）描述设备具备的服务能力，每个服务具备的属性、命令以及命令的参数。</li>
</ol>
<h3 id="编解码插件开发"><a href="#编解码插件开发" class="headerlink" title="编解码插件开发"></a>编解码插件开发</h3><p>通过图形化的方式实现设备的二进制码流到IoT平台的Json格式消息的转化，同时将平台下发的控制命令编解成设备的二进制码流格式。</p>
<ol>
<li><p><strong>上行消息处理流程</strong></p>
<ul>
<li>南向设备（UE）通过采集数据，并将数据按自定义规则进行编码；</li>
<li>南向设备通过串口，以及AT命令的形式，发送已经编码的数据到NB-IoT模组；</li>
<li>NB-IoT芯片/模组，接收到AT命令后，自动封装为CoAP协议的消息，并发送给事先配置好的华为物联网平台；</li>
<li>华为物联网平台收到数据后，自动解析CoAP协议包，根据设备Profile文件，找到匹配的编解码插件，对Payload进行解析，解析为与设备Profile中描述的Service匹配的Json数据，并保存于平台之上；</li>
<li>应用服务器（APP Server）通过北向数据查询接口（RESTful）获取平台上的数据；同时也可以提前调用订阅接口，对数据变化进行订阅，则之后所有的数据变化，平台都会通过POST消息，发送到指定的服务器。</li>
</ul>
</li>
<li><p><strong>下行消息处理流程</strong></p>
<ul>
<li>IoT平台应用服务器（APP Server）创建信令（命令的相关项需要和设备Profile中的描述一致），发送到IoT平台；</li>
<li>收到之后，会先判断设备是否在线，如果在线，则立即下发信令，如果平台判断设备离线，则信令将缓存于平台的数据库中；</li>
<li>南向设备（UE）在某个时刻上报数据，平台收到数据后，将检索对应设备在数据库中是否存在有效未下发的信令（即缓存信令），如有，则下发该信令；</li>
<li>信令通过编解码插件进行编码（Json到二进制码流），并被发送到设备端（UE）；</li>
<li>南向设备（UE）收到信令，执行完毕，返回信令执行结果，IoT平台收到上述执行结果，通过编解码插件的解析，获取信令执行的结果，修改对应的信令状态，并将南向设备（UE）收到的信息上报到应用服务器（APP Server）上。</li>
</ul>
</li>
<li><p>*<em>Decode接口和Encode接口 *</em></p>
<p>Decode接口的入参binaryData为设备发过来的CoAP报文的Payload部分，设备的上行报文可以分为设备数据上报、设备对平台命令的应答两种情况，在这两种情况下解码输出的字段不同；Encode接口的入参是Json格式数据，是平台下发的消息或应答，平台的下行报文可以分为平台命令下发、平台对设备上报数据的相应两种情况。</p>
</li>
</ol>
<h3 id="南向设备对接"><a href="#南向设备对接" class="headerlink" title="南向设备对接"></a>南向设备对接</h3><ol>
<li><p>业务发放流程</p>
<ul>
<li>应用服务器用过申请的APP ID/密码登录Oceanconnect平台；</li>
<li>应用服务器进行设备开户，设置IoT设备的关键标识到平台侧，为IoT设备开户；</li>
<li>IoCM把IoT设备的信息存入MongoDB。</li>
</ul>
<blockquote>
<p>必须先为IoT设备在Oceanconnect平台中开户，否则设备是非法的，不能接入到平台中来。</p>
</blockquote>
</li>
<li><p>南向注册流程</p>
<ul>
<li>IoT设备上电、连网后，带着设备的关键词标识到Oceanconnect发起注册，Oceanconnect发现应用服务器已经为设备开户，注册成功；</li>
<li>IoT设备根据鉴权算法计算出鉴权码，用鉴权码去Oceanconnect平台鉴权；</li>
<li>IoCM在MongoDB更新IoT设备状态信息；</li>
<li>IoCM通知IoT应用服务器设备已经上线。</li>
</ul>
<blockquote>
<p><strong>注册只需要执行一次</strong>，注册成功后就不需要注册了；但为了数据安全，<strong>鉴权需要执行多次</strong>，一般IoT设备主动跟平台发消息是需要先鉴权。</p>
</blockquote>
</li>
<li><p>南向消息上报流程</p>
<ul>
<li>当IoT设备发现满足消息上报条件时，主动发消息给Oceanconnect平台；</li>
<li>根据收到的消息，IoCM判断是否需要存入数据库，如果需要存入数据库，则把消息保存到MongoDB中；</li>
<li>根据收到的消息，IoCM判断是否需要上报给应用服务器，如果需要，则把消息转发给应用服务器。</li>
</ul>
<blockquote>
<p>不同IoT设备消息上报机制不同，有的是周期性上报，每隔一段时间上报一次消息，有的是事件性上报，检测到某些事件时发消息通知平台。</p>
</blockquote>
</li>
<li><p>控制命令下发流程</p>
<ul>
<li>应用服务器主动向IoT设备下发控制命令，Oceanconnect平台把命令转发给IoT终端；</li>
<li>IoT设备收到命令后，执行控制命令的内容，并判断是否需要回复命令，如果需要，则回复命令；</li>
<li>根据收到的命令，IoCM判断是否需要上报给应用服务器，如果需要，则把命令转发给应用服务器。</li>
</ul>
<blockquote>
<p>为了省电，很多IoT设备不是一直在线的，比如水表、电表等，这类设备的控制命令往往不是实时转发的，Oceanconnect收到这类控制命令后，会把命令存储起来，等到IoT设备主动跟平台发命令时，再把控制命令转发下去。</p>
</blockquote>
</li>
</ol>
<h2 id="四、NB-IoT标准及解决方案"><a href="#四、NB-IoT标准及解决方案" class="headerlink" title="四、NB-IoT标准及解决方案"></a>四、NB-IoT标准及解决方案</h2><blockquote>
<p>NB-IoT（窄带蜂窝物联网）产业正在迅速崛起，这项技术在有效提供深度市内覆盖的同时，可以支持大量的低吞吐率、超低成本设备连接，并具有低功耗、优化的网络架构等独特优势。</p>
</blockquote>
<h3 id="NB-IoT物理层设计"><a href="#NB-IoT物理层设计" class="headerlink" title="NB-IoT物理层设计"></a>NB-IoT物理层设计</h3><ol>
<li>系统带宽：180kHz；</li>
<li>下行技术：正交频分多址（OFDMA），子载波间隔达15kHz，共12个子载波；</li>
<li>上行技术：单载波频分多址（SC-FDMA）。</li>
</ol>
<blockquote>
<ul>
<li>OFDMA（正交频分多址）：OFDMA是OFDM技术的演进，将OFDM和FDMA技术结合，再利用OFDM对信道进行子载波化后，在部分子载波上加载传输数据的传输技术。</li>
<li>OFDMA是一种多址接入调制技术，用户通过OFDMA共享频带资源，接入系统。</li>
<li>OFDMA又分为子信道OFDMA和调频OFDMA。</li>
</ul>
</blockquote>
<h3 id="NB-IoT物理信道与物理信号"><a href="#NB-IoT物理信道与物理信号" class="headerlink" title="NB-IoT物理信道与物理信号"></a>NB-IoT物理信道与物理信号</h3><p>为了减少实现的复杂性，NB-IoT精简了不必要的物理信道，在<strong>下行</strong>只有<strong>三种物理信道</strong>（窄带物理广播信道NPBCH、窄带物理下行控制信道NPDCCH、窄带物理下行共享信道NPDSCH）和<strong>两种参考信号</strong>（窄带参考信号NRS、窄带同步信号NSS），在<strong>上行</strong>只有<strong>两种物理信道</strong>（窄带物理上行共享信道NPUSCH、窄带物理随机接入信道NPRACH）和<strong>一种参考信号</strong>（窄带参考信号NDMRS）。总之，NB-IoT的物理信道通过降低目标速率、多次传输低阶调制方式等措施，以达到增加覆盖、降低成本、降低功耗的目的。</p>
<h3 id="NB-IoT部署方式"><a href="#NB-IoT部署方式" class="headerlink" title="NB-IoT部署方式"></a>NB-IoT部署方式</h3><p>NB-IoT构建于蜂窝网络，可采取带内、保护带或独立载波等三种部署方式，与现有网络共存，支持SingleRAN的平滑演进。其只消耗大约180kHz的频段，可直接部署于GSM网络、UMTS网络或LTE网络，以降低部署成本、实现平滑升级。</p>
<p>NB-IoT支持的三种部署方式：<strong>独立部署</strong>（Stand-alone）、<strong>保护带部署</strong>（Guard-band）、<strong>带内部署</strong>（Inband）。</p>
<ul>
<li>独立部署模式：利用单独的频带，适合用于GSM频段的重耕；</li>
<li>保护带部署模式：利用LTE系统中边缘无用频带；</li>
<li>带内模式：利用LTE载波重点的任何资源块。</li>
</ul>
<h3 id="NB-IoT关键特性"><a href="#NB-IoT关键特性" class="headerlink" title="NB-IoT关键特性"></a>NB-IoT关键特性</h3><ol>
<li><strong>超强覆盖</strong>：最大耦合损耗MCL比GPRS/LTE增加20dB；提升功率谱密度、重复发送；</li>
<li><strong>超低成本</strong>：180kHz窄带宽，基带复杂度低；低采样率；单天线，半双工，RF成本低；峰均比低，功效效率高；协议栈简化；</li>
<li><strong>超低功耗</strong>：PSM、eDRX；</li>
<li><strong>超大连接</strong>：上行业务调度单元小、减小空口信令开销、PSM/eDRX降低了每个设备的资源使用量、基站优化、核心网优化。</li>
</ol>
<h2 id="五、华为NB-IoT芯片与模组"><a href="#五、华为NB-IoT芯片与模组" class="headerlink" title="五、华为NB-IoT芯片与模组"></a>五、华为NB-IoT芯片与模组</h2><h3 id="华为Boudica芯片概述"><a href="#华为Boudica芯片概述" class="headerlink" title="华为Boudica芯片概述"></a>华为Boudica芯片概述</h3><p>华为Boudica芯片拥有三个CPU，分别为<strong>安全核</strong>（S核，负责启动A、C核，拥有擦除和写内置flash的权限）、<strong>协议核</strong>（C核，主要包含NB-IoT及LWIP协议）、<strong>应用核</strong>（A核，主要负责AT指令解析、外置flash读写以及其他上层应用、协议等），三核之间采用共享内存的方式实现核内通信。</p>
<p>华为Boudica芯片研发阶段可靠性试验总体可以分为四大类，包括环境适应性试验、可靠性极限测试、长期可靠性测试、小批量可靠性测试。</p>
<h2 id="六、CoAP协议技术原理"><a href="#六、CoAP协议技术原理" class="headerlink" title="六、CoAP协议技术原理"></a>六、CoAP协议技术原理</h2><h3 id="CoAP协议概述"><a href="#CoAP协议概述" class="headerlink" title="CoAP协议概述"></a>CoAP协议概述</h3><p>CoAP是受限制的应用协议（Constrained Application Protocol）的简称。在当前由PC机组成的世界，信息交换是通过TCP和应用层协议HTTP实现的，但对于小型设备而言，实现TCP和HTTP协议显然是一个过分的要求，为了让小设备可以接入互联网，CoAP协议被设计出来。CoAP协议是一种应用层协议，它运行于UDP协议之上而不是像HTTP那样运行于TCP之上。CoAP协议非常小巧，最小的数据包仅为4字节。</p>
<p>应用层协议有CoAP、MQTT（消息队列遥测传输协议）、XMPP（可扩展消息处理现场协议）、HTTP等，物联网主流使用的是CoAP协议和MQTT协议。</p>
<h3 id="CoAP协议特点"><a href="#CoAP协议特点" class="headerlink" title="CoAP协议特点"></a>CoAP协议特点</h3><ol>
<li>CoAP协议基于UDP；</li>
<li>采用异步消息交换；</li>
<li>CoAP协议是二进制格式的，HTTP是文本格式的，CoAP比HTTP更加紧凑；</li>
<li>轻量化，CoAP最小长度仅4个字节；</li>
<li>支持可靠传输，数据重传，块传输，确保数据可靠到达；</li>
<li>支持URI和Content-Type；</li>
<li>能实现简单的数据缓存和代理；无状态的HTTP映射，可以构建代理服务器，使构建代理服务器，使CoAP资源可以用HTTP访问，也可以使HTTP接口实现于CoAP协议之上；</li>
<li>支持DTLS；</li>
<li>CoAP基于REST，服务器的资源地址和互联网一样也有类似URI的格式，客户端同样有POST，GET，PUT，DELETE方法来访问server，但是想对HTTP简化实现降低复杂度（代码更小，封包更小）。</li>
</ol>
<h3 id="RESTful架构"><a href="#RESTful架构" class="headerlink" title="RESTful架构"></a>RESTful架构</h3><p>REST是一种设计风格而不是标准，如果一个架构符合REST原则，我们就称它为RESTful架构，REST就是表现层状态转化，其中表现层其实指的是资源的表现层，即资源在网络中某种形式进行状态转移。</p>
<h3 id="CoAP协议报文结构"><a href="#CoAP协议报文结构" class="headerlink" title="CoAP协议报文结构"></a>CoAP协议报文结构</h3><table>
<thead>
<tr>
<th align="center">字段</th>
<th align="center">位</th>
<th align="center">名称</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Ver</td>
<td align="center">2bits</td>
<td align="center">版本编号</td>
<td align="center">指示CoAP协议的版本号，类似于HTTP1.0和HTTP1.1，版本编号占2位。</td>
</tr>
<tr>
<td align="center">T</td>
<td align="center">2bits</td>
<td align="center">报文类型</td>
<td align="center">CoAP协议定义了4种不同形式的报文，包括CON，NON，ACK，RST。</td>
</tr>
<tr>
<td align="center">TKL</td>
<td align="center">4bits</td>
<td align="center">Token length</td>
<td align="center">Token长度。</td>
</tr>
<tr>
<td align="center">Code</td>
<td align="center">8bits</td>
<td align="center">表现形式</td>
<td align="center">Code在CoAP请求报文和相应报文中具有不同的表现形式。</td>
</tr>
<tr>
<td align="center">Message ID</td>
<td align="center">16bits</td>
<td align="center">报文编号</td>
<td align="center">用于重复消息检测、匹配消息类型等。每个CoAP报文都有一个ID，在一次会话中ID总是保持不变，但是在这个会话结束之后，该ID会被回收利用。</td>
</tr>
<tr>
<td align="center">Token</td>
<td align="center"></td>
<td align="center">标识具体内容</td>
<td align="center">ID的另一种表现，通过TKL制定Token长度。</td>
</tr>
<tr>
<td align="center">Options</td>
<td align="center"></td>
<td align="center">报文选项</td>
<td align="center">通过报文选项可设定CoAP主机，CoAP URI，CoAP请求参数和负载媒体类型等。</td>
</tr>
<tr>
<td align="center">1111 1111</td>
<td align="center">8bits</td>
<td align="center">分隔符</td>
<td align="center">CoAP报文和具体负载之间的分隔符，固定一个字节。</td>
</tr>
<tr>
<td align="center">Payload</td>
<td align="center"></td>
<td align="center">交互数据</td>
<td align="center">真正有用的被交互的数据。</td>
</tr>
</tbody></table>
<h3 id="CoAP协议逻辑分层"><a href="#CoAP协议逻辑分层" class="headerlink" title="CoAP协议逻辑分层"></a>CoAP协议逻辑分层</h3><p>CoAP协议逻辑上分两层：<strong>资源请求/响应层</strong>（Request/Response）和<strong>消息层</strong>（Messages）。Messages层只负责控制端到端的报文交互；Request/Response层负责传输资源操作的请求和响应。</p>
<h3 id="CoAP-Messages模型"><a href="#CoAP-Messages模型" class="headerlink" title="CoAP Messages模型"></a>CoAP Messages模型</h3><ol>
<li>Reliability Mode（可靠消息传播）：主要通过确认及重传机制来实现的，客户端发送消息后，需要等待服务器收到通知，如果在规定时间内，没有收到需要重新发送数据。可靠传输是基于CON消息传输的，服务器端收到CON类型的消息后，需要返回ACK消息，客户端在指定时间ACK_TIMEOUT内收到ACK消息后，才代表这个消息已发送到服务器端。</li>
<li>Non-Reliability Mode（非可靠消息传播）：客户端只管发送消息，不管服务器端有没有收到，因此可能存在丢包。非可靠消息传播是基于NON消息传输的，服务器端收到NON类型消息后，不用回复ACK消息。</li>
</ol>
<h3 id="CoAP-Messages分类"><a href="#CoAP-Messages分类" class="headerlink" title="CoAP Messages分类"></a>CoAP Messages分类</h3><table>
<thead>
<tr>
<th align="center">字段类型</th>
<th align="center">作用</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">CON消息</td>
<td align="center">需要确认的消息</td>
<td align="center">Receipt方必须对消息回复ACK消息或者Reset。</td>
</tr>
<tr>
<td align="center">NON消息</td>
<td align="center">不需要确认的消息</td>
<td align="center">Receipt方可能回复Reset。</td>
</tr>
<tr>
<td align="center">ACK消息</td>
<td align="center">用于向客户端确认CON消息已收到</td>
<td align="center">可以携带同步可靠响应模式Piggybacked Response。</td>
</tr>
<tr>
<td align="center">RST消息</td>
<td align="center">用于回复收到的无法处理的消息</td>
<td align="center">可通过一个Empty Message触发一个Reset，用于Endpoint的保活检测。</td>
</tr>
</tbody></table>
<p>协议定义的Message的种类，由报文中的2bits的【T】字段确认具体类型；</p>
<p>Empty Message是一个既不是Request也不是Response的Message。</p>
<h3 id="CoAP-Message的可靠传输"><a href="#CoAP-Message的可靠传输" class="headerlink" title="CoAP Message的可靠传输"></a>CoAP Message的可靠传输</h3><ol>
<li>CON和ACK/Reset Message中携带Message ID用于配对是一次可靠传输过程，支持重复检测。</li>
<li>简单的停等基于指数回退的重传机制保证可靠性：客户端构造CON消息发送到服务器端，未收到ACK或Reset Message时，支持基于指数回退的重传机制；服务器端如果可以处理该消息，返回ACK，否则返回Reset。</li>
<li>Message的可靠传输由一个CON消息发起。</li>
<li>CON消息总是承载一个Request或Response，除非是一个为了触发Reset Message的Empty Message。</li>
<li>Receipt收到一个CON消息，处理结果是回复一个ACK消息（携带匹配的Message ID）或者在某些情况（Receipt不能正确处理消息、Message是一个Empty Message、Message存在格式错误）下Rejecting一个消息。</li>
<li>Rejecting一个消息的结果是回复Reset Message或者忽略它。</li>
</ol>
<h3 id="CoAP-Message的非可靠传输"><a href="#CoAP-Message的非可靠传输" class="headerlink" title="CoAP Message的非可靠传输"></a>CoAP Message的非可靠传输</h3><p>NON消息中仍然携带Message ID用于重复检测：客户端对于不需要可靠传输的Message通过NON消息传递；虽然不需要ACK确认NON消息，服务器端仍然可能会返回Reset给客户端（比如服务器端不能处理这个NON消息）。</p>
<h3 id="CoAP-Request-Response模型"><a href="#CoAP-Request-Response模型" class="headerlink" title="CoAP Request/Response模型"></a>CoAP Request/Response模型</h3><p>CoAP Request和Response的语法通过Message承载（同样有可靠传输和非可靠传输），其中可靠传输Request和Response的响应方式有两种：<strong>同步可靠响应模式</strong>（Piggybacked Response）、<strong>异步可靠响应模式</strong>（Separate Response）。</p>
<ol>
<li><p>CoAP Request/Response可靠响应模式：同步可靠响应模式（Piggybacked Response）中Request和Response通过Token配对；异步可靠响应模式（Separate Response）中跨多对消息的Request和Response通过Token配对。</p>
</li>
<li><p>CoAP Request/Response非可靠响应模式：Request和Response通过Token配对；对于通过NON承载的Request和Response，服务器端可以选择通过CON返回Response。</p>
</li>
</ol>
<h2 id="七、MQTT协议技术原理"><a href="#七、MQTT协议技术原理" class="headerlink" title="七、MQTT协议技术原理"></a>七、MQTT协议技术原理</h2><h3 id="MQTT协议概述"><a href="#MQTT协议概述" class="headerlink" title="MQTT协议概述"></a>MQTT协议概述</h3><p>MQTT（Message Queuing Telemetry Transport，消息队列遥测传输协议）构建于TCP/IP协议之上，是为硬件性能低下的远程设备以及网络状况糟糕的情况下二设计的发布/订阅型“轻量级”通讯协议。MQTT协议可以在严重受限的设备硬件和高延迟/带宽有限的网络上实现，其灵活性使得为IoT设备和服务的多样化应用场景提供支持成为可能。</p>
<h3 id="MQTT协议特点"><a href="#MQTT协议特点" class="headerlink" title="MQTT协议特点"></a>MQTT协议特点</h3><ol>
<li>使用发布（Publish）/订阅（Subscribe）消息模式，提供了一对多的消息发布和应用之间的解耦。</li>
<li>消息传输不需要知道负载内容。</li>
<li>提供三种等级的质量服务。</li>
<li>很小的传输消耗和协议数据交换，最大限度减少网络流量。</li>
<li>异常连接断开发生时，能通知到相关各方。</li>
</ol>
<h3 id="MQTT的发布-订阅模式"><a href="#MQTT的发布-订阅模式" class="headerlink" title="MQTT的发布/订阅模式"></a>MQTT的发布/订阅模式</h3><ol>
<li>客户端（包括发布者和订阅者）连接到代理服务器（是任何发布/订阅协议的核心），以订阅代理中的任何消息主题。</li>
<li>客户端通过将消息和主题发送给代理，发布某个主题范围内的消息。</li>
<li>代理然后通过将消息转发给所有订阅该主题的客户端。</li>
<li>发布/订阅解耦（空间解耦、时间解耦、同步解耦）了消息的发布者和接受者。</li>
</ol>
<h3 id="MQTT在主题通配符"><a href="#MQTT在主题通配符" class="headerlink" title="MQTT在主题通配符"></a>MQTT在主题通配符</h3><p>（1）、单级（只能用于单个主题层级匹配的通配符）：+</p>
<p>（2）、多级（用于匹配主题中任意层级的通配符，放在末尾且前面必须加反斜杠）：#</p>
<h3 id="MQTT服务质量（QoS）"><a href="#MQTT服务质量（QoS）" class="headerlink" title="MQTT服务质量（QoS）"></a>MQTT服务质量（QoS）</h3><p>服务质量（QoS）级别一种关于发送者和接受者之间信息投递的保证协议。MQTT中有三种QoS级别：QoS 0（最多分发一次；消息的分发依赖于底层网络的能力，接受者不会发送响应，发送者也不会重试，消息可能送达一次也看根本没送达）、QoS 1（至少分发一次；服务质量确保消息至少送达一次，QoS 1的发布报文的可变报头中包含一个报文标识符，需要PUBACK报文确认）、QoS 2（仅分发一次；最高等的服务质量，消息丢失和重复都是不可接受的，使用这个服务质量登记会有额外的开销）。</p>
<h3 id="MQTT控制报文结构"><a href="#MQTT控制报文结构" class="headerlink" title="MQTT控制报文结构"></a>MQTT控制报文结构</h3><p>MQTT控制报文结构：在MQTT协议中，一个MQTT数据包由：固定头（Fixed header，所有控制报文都包含）、可变头（Variable header，部分控制报文包含）、消息体（payload，部分控制报文包含）三部分构成。</p>
<h3 id="MQTT连接"><a href="#MQTT连接" class="headerlink" title="MQTT连接"></a>MQTT连接</h3><p>MQTT连接是在客户端和代理服务器之间，连接是通过客户端向代理服务器发送连接消息（CONNECT）发起的，代理服务器会响应一个CONNACK消息和状态码，一旦连接建立，只要客户端不发送断开连接的命令或失去联系，代理服务器将保持连接。</p>
<h3 id="MQTT保留消息"><a href="#MQTT保留消息" class="headerlink" title="MQTT保留消息"></a>MQTT保留消息</h3><p>保留消息是一条将保留标志（retained flag）置为true的普通MQTT消息。<strong>代理服务器会针对主题依照QoS级别保留最后一条保留消息</strong>。保留消息存在的意义是为了订阅者能够立即受到消息而无需等待发布者发布下一条消息。一个主题的保留消息是最新的可知的有效数据，它不必是最新的数据，但它一定是将保留标志置为true的最新消息。</p>
<h3 id="MQTT遗嘱LWT"><a href="#MQTT遗嘱LWT" class="headerlink" title="MQTT遗嘱LWT"></a>MQTT遗嘱LWT</h3><p>MQTT使用遗嘱LWT功能通知其他客户端某个客户端意外断开了连接，每个客户端都可以在连接代理服务器是指定其最新的遗嘱（一个具备主题，保留标志，QoS的普通MQTT消息）。代理服务器会在以下情况下分发遗嘱消息：代理服务器发现一个I/O错误或者网络错误、客户端没有按时发送心跳包、客户端没有在断开连接前发送DISCONNECT包、代理服务器因为协议错误而断开连接。</p>
<h3 id="MQTT心跳包"><a href="#MQTT心跳包" class="headerlink" title="MQTT心跳包"></a>MQTT心跳包</h3><p>为了应对半开连接问题，MQTT提供了心跳（keep alive）机制。</p>
<ol>
<li><p>MQTT客户端向代理服务器发起CONNECT请求时，通过KeepAlive参数设置保活周期。</p>
</li>
<li><p>客户端在无报文发送时，按KeepAlive周期定时发送2字节的PINGREQ心跳报文，代理服务器收到PINGREQ心跳报文后，回复2字节的PINGRESP报文。</p>
</li>
<li><p>代理服务器在1.5个心跳周期内，既没有收到客户端发布订阅报文，也没有收到PINGREQ心跳报文时，主动心跳超时断开客户端TCP连接并且发送遗嘱消息（前提是客户端已经指定了遗嘱）。</p>
</li>
<li><p>客户端可以在任何时间发送PINGREQ来确认网络连接是有效的，PINGREQ不包含任何消息体（payload）。</p>
</li>
</ol>
<h2 id="八、NB-IoT模组常用AT指令"><a href="#八、NB-IoT模组常用AT指令" class="headerlink" title="八、NB-IoT模组常用AT指令"></a>八、NB-IoT模组常用AT指令</h2><h3 id="NB-IoT芯片的常用AT指令"><a href="#NB-IoT芯片的常用AT指令" class="headerlink" title="NB-IoT芯片的常用AT指令"></a>NB-IoT芯片的常用AT指令</h3><p>NB-IoT芯片的AT指令可以分为测试指令（AT+<X>=?）、查询指令（AT+<X>?）、有参数的执行指令（AT+<X>=&lt;…&gt;）和无参数的执行指令（AT+<X>）。</p>
<h3 id="NB-IoT-3GPP相关指令"><a href="#NB-IoT-3GPP相关指令" class="headerlink" title="NB-IoT 3GPP相关指令"></a>NB-IoT 3GPP相关指令</h3><ol>
<li>AT+CGSN 查询模块序列号IMEI号；</li>
<li>AT+CEREG 查询网络注册状态；</li>
<li>AT+CSCON 查询终端与基站连接状态；</li>
<li>AT+CGPADDR 显示PDP地址；</li>
<li>AT+CMEE 报告终端错误；</li>
<li>AT+CFUN 设置模块射频功能；</li>
<li>AT+NRB 重启模块；</li>
<li>AT+CSQ 查询模块信号强度；</li>
<li>AT+CGATT 查询网络激活状态；</li>
</ol>
<h2 id="九、物联网操作系统概述"><a href="#九、物联网操作系统概述" class="headerlink" title="九、物联网操作系统概述"></a>九、物联网操作系统概述</h2><h3 id="RTOS概述"><a href="#RTOS概述" class="headerlink" title="RTOS概述"></a>RTOS概述</h3><p>RTOS（Real-time operating system，实时操作系统）是管理系统硬件和软件资源的系统软件，以方便开发者使用，操作系统管理的资源包括处理器、存储器、外设、文件系统等等。实时操作系统最大的特色就是“实时性”，即如果有任务需要执行，实时操作系统会在短时间内执行该任务，保证了任务在指定时间内完成。实时操作系统根据任务执行的实时性，可以分为“软实时”操作系统和“硬实时”操作系统，“硬实时”操作系统比“软实时”操作系统响应更快、实时性更高，“硬实时”操作系统大多应用于工业领域，“硬实时”操作系统必须使任务在确定的时间内完成，“软实时”操作系统能让绝大多数任务在确定的时间内完成。<strong>Huawei LiteOS是一款“软实时”操作系统。</strong></p>
<h3 id="RTOS的优势"><a href="#RTOS的优势" class="headerlink" title="RTOS的优势"></a>RTOS的优势</h3><ol>
<li>降低开发难度，直接使用系统API，即可完成系统资源的申请、多任务的配合（基于优先级的实时抢占调度，同优先级的时间片调度），以及任务间的通信等（如锁、事件等机制）。</li>
<li>增加代码可读性，易于维护和管理。</li>
<li>提升可移植性，对接不同芯片的工作由操作系统完成，应用开发者只需要关注OS层接口。</li>
</ol>
<h2 id="十、Huawei-LiteOS基础框架"><a href="#十、Huawei-LiteOS基础框架" class="headerlink" title="十、Huawei LiteOS基础框架"></a>十、Huawei LiteOS基础框架</h2><h3 id="Huawei-LiteOS-Kernel概述"><a href="#Huawei-LiteOS-Kernel概述" class="headerlink" title="Huawei LiteOS Kernel概述"></a>Huawei LiteOS Kernel概述</h3><p>Huawei LiteOS基础内核是最精简的Huawei LiteOS操作系统代码，包括任务管理、内存管理、时间管理、通信机制、中断管理、事件管理、定时器等操作系统基础组件，可以单独运行。</p>
<h3 id="Huawei-LiteOS-Kernel的优势"><a href="#Huawei-LiteOS-Kernel的优势" class="headerlink" title="Huawei LiteOS Kernel的优势"></a>Huawei LiteOS Kernel的优势</h3><ol>
<li>高实时性，高稳定性；</li>
<li>超小内核，基础内核体积可以裁剪至不到10KB；</li>
<li>低功耗；</li>
<li>支持功能静态裁剪。</li>
</ol>
<h3 id="Huawei-LiteOS低功耗设计"><a href="#Huawei-LiteOS低功耗设计" class="headerlink" title="Huawei LiteOS低功耗设计"></a>Huawei LiteOS低功耗设计</h3><ol>
<li><p>调度机制：集中式任务调度机制；</p>
</li>
<li><p>传输机制：轻量级网络协议栈、路由算法改进、Sleeping Router。</p>
</li>
</ol>
<h3 id="Huawei-LiteOS安全设计"><a href="#Huawei-LiteOS安全设计" class="headerlink" title="Huawei LiteOS安全设计"></a>Huawei LiteOS安全设计</h3><ol>
<li>内核层：SafeArea（使得进程之间相互隔离；保护密钥、证书等敏感数据，只能通过保护API访问）、区分用户态和内核态（限制应用对硬件和资源的访问）、安全加载（对可信应用核非可信应用采取不同的加载和资源分配机制）；</li>
<li>传输层：基于TLS/DTLS的加密传输；</li>
<li>应用层：可信应用签名、API认证。</li>
</ol>
<h3 id="Huawei-LiteOS-Kernel概述-1"><a href="#Huawei-LiteOS-Kernel概述-1" class="headerlink" title="Huawei LiteOS Kernel概述"></a>Huawei LiteOS Kernel概述</h3><p>Huawei LiteOS Kernel基本框架包括内存（动态内存和静态内存）、时间管理（系统时间、软件定时器和Tick）、IPC通信（消息队列和事件）、硬件相关（中断、异常和硬件定时器）、任务（任务调度）及任务同步（互斥锁和信号量）。</p>
<h3 id="Huawei-LiteOS-Kernel任务模块—任务概述"><a href="#Huawei-LiteOS-Kernel任务模块—任务概述" class="headerlink" title="Huawei LiteOS Kernel任务模块—任务概述"></a>Huawei LiteOS Kernel任务模块—任务概述</h3><ol>
<li>从系统的角度看，<strong>任务是竞争系统资源的最小运行单位</strong>，任务可以使用或等待CPU、使用内存空间等系统资源，并独立于其他任务运行。</li>
<li>Huawei LiteOS中的任务是<strong>抢占式调度</strong>机制，同时支持<strong>时间片轮转调度</strong>机制。</li>
<li>高优先级的任务可以打断低优先级任务，低优先级的任务必须在高优先级任务阻塞或结束后才能得到调度。</li>
<li>Huawei LiteOS的任务一共有<strong>32个优先级</strong>，最高优先级为0，最低优先级为31。</li>
</ol>
<h3 id="Huawei-LiteOS-Kernel任务模块—任务状态"><a href="#Huawei-LiteOS-Kernel任务模块—任务状态" class="headerlink" title="Huawei LiteOS Kernel任务模块—任务状态"></a>Huawei LiteOS Kernel任务模块—任务状态</h3><ol>
<li>就绪态（Ready）：该任务在就绪列表中，就绪的任务已经具备执行的能力，只需等待调度器进行调度，新创建的任务会初始化为就绪态；</li>
<li>运行态（Running）：该状态表明任务正在执行，此时它占用处理器，LiteOS调度器选择运行的永远是处于最高优先级的就绪态任务，当任务被运行的一刻，它的任务状态就变成了运行态；</li>
<li>阻塞态（Blocked）：如果当任务当前正在等待某个时序或外部中断，则该任务处于阻塞状态，该任务不在就绪列表中。包含任务被挂起、任务被延时、任务正在等待信号量、读写队列或者等待读写事件等。</li>
<li>退出态（Dead）：该任务运行结束，等待系统回收资源。</li>
<li>就绪态→运行态：任务创建后进入就绪态，发生任务切换时，就绪列表中最高优先级的任务被执行，从而进入运行态，但此刻该任务依旧在就绪列表中。</li>
<li>运行态→阻塞态：正在运行的任务发生阻塞（挂起、延时、读信号量等待）时，该任务就会从就绪列表中删除，任务状态由运行态变成阻塞态，然后发生任务切换，运行就绪列表中剩余最高优先级任务。</li>
<li>阻塞态→就绪态（阻塞态→运行态）：阻塞态的任务被恢复后（任务恢复、延时时间超时、读信号量超时或读到信号量等），此时被恢复的任务会被加入就绪列表，从而由阻塞态变成就绪态；此时如果被恢复任务的优先级高于正在运行任务的优先级，则会发生任务切换，讲该任务由就绪态变成运行态。</li>
<li>就绪态→阻塞态：任务也有可能在就绪态时被阻塞（挂起），此时任务状态会由就绪态转变为阻塞态，该任务从就绪列表中删除，不会参与任务调度，直到该任务被恢复。</li>
<li>运行态→就绪态：有更高优先级任务创建或者恢复后，会发生任务调度，此刻就绪列表中最高优先级任务会变为运行态，那么原先运行的任务由运行态变为就绪态，依然在就绪列表中。</li>
<li>运行态→退出态：运行中的任务运行结束，任务状态由运行态转变为退出态，退出态包含任务运行结束的正常退出以及impossible状态。</li>
<li>阻塞态→退出态：阻塞的任务调用删除接口，任务状态由阻塞态转变为退出态。</li>
</ol>
<h3 id="Huawei-LiteOS-Kernel内存模块—内存概述"><a href="#Huawei-LiteOS-Kernel内存模块—内存概述" class="headerlink" title="Huawei LiteOS Kernel内存模块—内存概述"></a>Huawei LiteOS Kernel内存模块—内存概述</h3><ol>
<li><p>内存管理模块系统的内存资源，是操作系统的核心模块之一。主要包括内存的初始化、分配以及释放。</p>
</li>
<li><p>在系统运行过程中，内存管理模块通过对内存的申请/释放操作，来管理用户和OS对内存的使用，使内存的利用率和使用效率达到最优，同时最大限度地解决系统的内存碎片问题。</p>
</li>
<li><p>Huawei LiteOS的内存管理分为静态内存和动态内存管理，提供内存初始化、分配、释放等功能。</p>
</li>
<li><p>动态内存：在动态内存池中分配用户指定大小的内存块。</p>
<p>优点：按需分配；</p>
<p>缺点：内存池中可能出现碎片。</p>
</li>
<li><p>静态内存：在静态内存池中分配用户初始化时预设（固定）大小的内存块。</p>
<p>优点：分配和释放效率高，静态内存池中无碎片；</p>
<p>缺点：只能申请到初始化预设大小的内存块，不能按需申请。</p>
</li>
</ol>
<h3 id="Huawei-LiteOS-Kernel硬件相关模块—中断概述"><a href="#Huawei-LiteOS-Kernel硬件相关模块—中断概述" class="headerlink" title="Huawei LiteOS Kernel硬件相关模块—中断概述"></a>Huawei LiteOS Kernel硬件相关模块—中断概述</h3><ol>
<li>中断是指出现需要时，CPU暂停执行当前程序，转而执行新程序的过程。即在程序运行过程中，系统出现了一个必须由CPU立即处理的事务，此时，CPU暂时中止当前程序的执行转而处理这个事务，这个过程就叫做中断。</li>
<li>通过中断机制，在外设不需要CPU介入时，CPU可以执行其他任务，而当外设需要CPU时通过产生中断信号使CPU立即中断当前任务来响应中断请求。这样可以使CPU避免把大量时间耗费在等待，查询外设状态的操作上，因此将大大提高系统实时性以及执行效率。</li>
<li>Huawei LiteOS的中断支持：中断初始化、中断创建、开/关中断、恢复中断、中断使能、中断屏蔽。</li>
<li>Huawei LiteOS的中断机制支持中断共享。</li>
</ol>
<h3 id="Huawei-LiteOS-Kernel硬件相关模块—中断运作机制"><a href="#Huawei-LiteOS-Kernel硬件相关模块—中断运作机制" class="headerlink" title="Huawei LiteOS Kernel硬件相关模块—中断运作机制"></a>Huawei LiteOS Kernel硬件相关模块—中断运作机制</h3><ol>
<li>保存当前处理机状态信息；</li>
<li>载入异常或中断处理函数到PC寄存器；</li>
<li>把控制权转交给处理函数并开始执行；</li>
<li>当处理函数执行完成时，恢复处理器状态信息；</li>
<li>从异常或中断中返回到前一个程序执行点。</li>
</ol>
<h3 id="Huawei-LiteOS-Kernel-IPC通信模块—队列概述"><a href="#Huawei-LiteOS-Kernel-IPC通信模块—队列概述" class="headerlink" title="Huawei LiteOS Kernel IPC通信模块—队列概述"></a>Huawei LiteOS Kernel IPC通信模块—队列概述</h3><p>队列又称消息队列，是一种常用于任务间通信的数据结构，实现了接收来自任务或中断的不固定长度的消息，并根据不同的接口选择传递消息是否存放在最近空间。任务能够从队列里面读取消息，当队列中的消息是空时，挂起读取任务；当队列中有新消息时，挂起的读取任务被唤醒并处理新消息。</p>
<h3 id="Huawei-LiteOS-Kernel-IPC通信模块—队列运作原理"><a href="#Huawei-LiteOS-Kernel-IPC通信模块—队列运作原理" class="headerlink" title="Huawei LiteOS Kernel IPC通信模块—队列运作原理"></a>Huawei LiteOS Kernel IPC通信模块—队列运作原理</h3><ol>
<li>创建队列时，根据用户传入队列长度和消息节点大小来开辟相应的内存空间以供该队列使用，返回队列ID。</li>
<li>在队列控制块中维护一个消息头节点位置Head和一个消息尾节点位置Tail来表示当前队列中消息存储情况。Head表示队列中被占用消息的起始位置；Tail表示队列中被空闲消息的起始位置；刚创建时Head和Tail均指向队列起始位置。</li>
<li>写队列时，根据Tail找到被占用消息节点末尾的空闲节点作为数据写入对象。如果Tail已经指向队列尾则采用回卷方式。根据usWritableCnt判断队列是否可以写入，不能对已满（usWritableCnt为0）队列进行写队列操作。</li>
<li>读队列时，根据Head找到最先写入队列中的消息节点进行读取。如果Head已经指向队列尾则采用回卷方式。根据usReadableCnt判断队列是否有消息读取，对全部空闲（usReadableCnt为0）队列进行读队列操作会引任务挂起。</li>
<li>删除队列时，根据传入的队列ID寻找到对应的队列，把队列状态置为未使用，释放原队列所占的空间，对应的队列控制头置为初始状态。</li>
</ol>
<h3 id="Huawei-LiteOS-Kernel任务同步模块—互斥锁概述"><a href="#Huawei-LiteOS-Kernel任务同步模块—互斥锁概述" class="headerlink" title="Huawei LiteOS Kernel任务同步模块—互斥锁概述"></a>Huawei LiteOS Kernel任务同步模块—互斥锁概述</h3><ol>
<li>互斥锁又称互斥型信号量，是一种特殊的二值性信号量，用于实现对共享资源的独占式处理。</li>
<li>任意时刻互斥锁的状态只有两种，开锁或闭锁。当有任务持有时，互斥锁处于闭锁状态，这个任务获得该互斥锁的所有权。当该任务释放它时，该互斥锁被开锁，任务失去该互斥锁的所有权。当一个任务持有互斥锁时，其他任务将不能再对该互斥锁进行开锁或持有。</li>
<li>多任务环境下往往存在多个任务竞争同一共享资源的应用场景，互斥锁可被用于对共享资源的保护从而实现独占式访问。另外，互斥锁可以解决信号量存在的优先级翻转问题。</li>
</ol>
<h3 id="Huawei-LiteOS-Kernel任务同步模块—信号量概述"><a href="#Huawei-LiteOS-Kernel任务同步模块—信号量概述" class="headerlink" title="Huawei LiteOS Kernel任务同步模块—信号量概述"></a>Huawei LiteOS Kernel任务同步模块—信号量概述</h3><ol>
<li>信号量（Semaphore）是一种实现任务间通信的机制，实现任务之间同步或临界资源的互斥访问，常用于协助一组相互竞争的任务来访问临界资源。</li>
<li>在多任务系统中，信号量功能可用于任务之间需要同步或互斥实现临界资源的保护。</li>
</ol>
<h3 id="Huawei-LiteOS-Kernel任务同步模块—信号量运作原理"><a href="#Huawei-LiteOS-Kernel任务同步模块—信号量运作原理" class="headerlink" title="Huawei LiteOS Kernel任务同步模块—信号量运作原理"></a>Huawei LiteOS Kernel任务同步模块—信号量运作原理</h3><ol>
<li>信号量初始化，为配置的N个信号量申请内存（N值可以由用户自行配置，受内存限制）并把所有的信号量初始化成未使用，并加入到未使用链表中供系统使用。</li>
<li>信号量创建，从未使用的信号量链表中获取一个信号量资源，并设定初值。</li>
<li>信号量申请，若其计数器值大于0，则直接减1返回成功。否则任务阻塞,等待其它任务释放该信号量，等待的超时时间可设定。当任务被一个信号量阻塞时，将该任务挂到信号量等待任务队列的队尾。</li>
<li>信号量释放，若没有任务等待该信号量,则直接将计数器加1返回。否则唤醒该信号量等待任务队列上的第一个任务。</li>
<li>信号量删除，将正在使用的信号量置为未使用信号量，并挂回到未使用链表。</li>
<li>信号量允许多个任务在同一时刻访问同一资源，但会限制同一时刻访问此资源的最大任务数目。访问同一资源的任务数达到该资源的最大数量时，会阻塞其他试图获取该资源的任务，直到有任务释放该信号量。</li>
</ol>
<h3 id="Huawei-LiteOS-Kernel时间管理模块—时间管理概述"><a href="#Huawei-LiteOS-Kernel时间管理模块—时间管理概述" class="headerlink" title="Huawei LiteOS Kernel时间管理模块—时间管理概述"></a>Huawei LiteOS Kernel时间管理模块—时间管理概述</h3><ol>
<li>时间管理以系统时钟为基础。时间管理提供给应用程序所有和时间有关的服务。</li>
<li>系统时钟是由定时/计时器产生的输出脉冲触发中断而产生的，一般定义为整数或长整数。输出脉冲的周期叫做一个“时钟滴答”。系统时钟也成为时标或者Tick，一个Tick的时长可以静态配置。</li>
<li>芯片CPU的计时是以Tick为单位的，Tick与秒之间的对应关系可以配置。</li>
</ol>
<h3 id="Huawei-LiteOS-Kernel模块—双向链表"><a href="#Huawei-LiteOS-Kernel模块—双向链表" class="headerlink" title="Huawei LiteOS Kernel模块—双向链表"></a>Huawei LiteOS Kernel模块—双向链表</h3><ol>
<li>双向链表是指含有<strong>往前和往后两个方向的链表</strong>，即每个节点中除存放下一个节点指针外，还增加一个指向其一个节点的指针，其头指针head是唯一确认的。</li>
<li>从双向链表中的任意一个节点开始，都可以很方便地访问它的前驱节点和后继节点，这种数据结构形式使得双向链表在查找时更加方便，特别是大量数据的遍历。由于双向链表具有对称性，能方便地完成各种插入、删除等操作，但需要注意前后方向的操作。</li>
</ol>
<h3 id="Huawei-LiteOS框架"><a href="#Huawei-LiteOS框架" class="headerlink" title="Huawei LiteOS框架"></a>Huawei LiteOS框架</h3><ol>
<li>互联框架：解决不同协议终端的互联互通，支持自组网；</li>
<li>传感框架：提供统一的传感器管理、传感算法库和驱动管理；</li>
<li>安全框架：提供API认证、双向设备认证和加密算法库，提高终端的安全性。</li>
</ol>
<h2 id="十一、华为HiLink平台"><a href="#十一、华为HiLink平台" class="headerlink" title="十一、华为HiLink平台"></a>十一、华为HiLink平台</h2><h3 id="华为HiLink-Wi-Fi模组优势"><a href="#华为HiLink-Wi-Fi模组优势" class="headerlink" title="华为HiLink Wi-Fi模组优势"></a>华为HiLink Wi-Fi模组优势</h3><ol>
<li>高性能可靠</li>
<li>轻量级内核</li>
<li>集成高效方便</li>
<li>强大技术支持</li>
<li>生态互联互通</li>
</ol>

      
    </div>
    
    
    

    <div>
      
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>

      
    </div>

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/IoT/" rel="tag"># IoT</a>
          
            <a href="/tags/%E5%8D%8E%E4%B8%BA/" rel="tag"># 华为</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/06/04/%E6%A0%91%E8%8E%93%E6%B4%BE%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%EF%BC%881%EF%BC%89/" rel="prev" title="树莓派零基础学习（1）">
                树莓派零基础学习（1） <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/teriri.png"
                alt="阿汤尼斯" />
            
              <p class="site-author-name" itemprop="name">阿汤尼斯</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%20%7C%7C%20archive">
              
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/artangnis" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#HCIP-IoT-Developer认证——物联网基础"><span class="nav-text">HCIP-IoT Developer认证——物联网基础</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#一、物联网概述"><span class="nav-text">一、物联网概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#物联网简介"><span class="nav-text">物联网简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#主流物联网接入技术应用场景划分"><span class="nav-text">主流物联网接入技术应用场景划分</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#物联网层次架构"><span class="nav-text">物联网层次架构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#物联网产业发展面临的主要挑战"><span class="nav-text">物联网产业发展面临的主要挑战</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#二、华为IoT联接管理平台——Oceanconnect"><span class="nav-text">二、华为IoT联接管理平台——Oceanconnect</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#华为IoT联接平台概述"><span class="nav-text">华为IoT联接平台概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Oceanconnect产品架构"><span class="nav-text">Oceanconnect产品架构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Oceanconnect业务与功能"><span class="nav-text">Oceanconnect业务与功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Oceanconnect产品特点"><span class="nav-text">Oceanconnect产品特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Oceanconnect关键特性"><span class="nav-text">Oceanconnect关键特性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#三、华为Oceanconnect端到端开发"><span class="nav-text">三、华为Oceanconnect端到端开发</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#整体方案介绍"><span class="nav-text">整体方案介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#北向业务服务开发"><span class="nav-text">北向业务服务开发</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设备Profile描述文件"><span class="nav-text">设备Profile描述文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#编解码插件开发"><span class="nav-text">编解码插件开发</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#南向设备对接"><span class="nav-text">南向设备对接</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#四、NB-IoT标准及解决方案"><span class="nav-text">四、NB-IoT标准及解决方案</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#NB-IoT物理层设计"><span class="nav-text">NB-IoT物理层设计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NB-IoT物理信道与物理信号"><span class="nav-text">NB-IoT物理信道与物理信号</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NB-IoT部署方式"><span class="nav-text">NB-IoT部署方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NB-IoT关键特性"><span class="nav-text">NB-IoT关键特性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#五、华为NB-IoT芯片与模组"><span class="nav-text">五、华为NB-IoT芯片与模组</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#华为Boudica芯片概述"><span class="nav-text">华为Boudica芯片概述</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#六、CoAP协议技术原理"><span class="nav-text">六、CoAP协议技术原理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#CoAP协议概述"><span class="nav-text">CoAP协议概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CoAP协议特点"><span class="nav-text">CoAP协议特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RESTful架构"><span class="nav-text">RESTful架构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CoAP协议报文结构"><span class="nav-text">CoAP协议报文结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CoAP协议逻辑分层"><span class="nav-text">CoAP协议逻辑分层</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CoAP-Messages模型"><span class="nav-text">CoAP Messages模型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CoAP-Messages分类"><span class="nav-text">CoAP Messages分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CoAP-Message的可靠传输"><span class="nav-text">CoAP Message的可靠传输</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CoAP-Message的非可靠传输"><span class="nav-text">CoAP Message的非可靠传输</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CoAP-Request-Response模型"><span class="nav-text">CoAP Request&#x2F;Response模型</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#七、MQTT协议技术原理"><span class="nav-text">七、MQTT协议技术原理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#MQTT协议概述"><span class="nav-text">MQTT协议概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MQTT协议特点"><span class="nav-text">MQTT协议特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MQTT的发布-订阅模式"><span class="nav-text">MQTT的发布&#x2F;订阅模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MQTT在主题通配符"><span class="nav-text">MQTT在主题通配符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MQTT服务质量（QoS）"><span class="nav-text">MQTT服务质量（QoS）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MQTT控制报文结构"><span class="nav-text">MQTT控制报文结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MQTT连接"><span class="nav-text">MQTT连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MQTT保留消息"><span class="nav-text">MQTT保留消息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MQTT遗嘱LWT"><span class="nav-text">MQTT遗嘱LWT</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MQTT心跳包"><span class="nav-text">MQTT心跳包</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#八、NB-IoT模组常用AT指令"><span class="nav-text">八、NB-IoT模组常用AT指令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#NB-IoT芯片的常用AT指令"><span class="nav-text">NB-IoT芯片的常用AT指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NB-IoT-3GPP相关指令"><span class="nav-text">NB-IoT 3GPP相关指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#九、物联网操作系统概述"><span class="nav-text">九、物联网操作系统概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#RTOS概述"><span class="nav-text">RTOS概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RTOS的优势"><span class="nav-text">RTOS的优势</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#十、Huawei-LiteOS基础框架"><span class="nav-text">十、Huawei LiteOS基础框架</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Huawei-LiteOS-Kernel概述"><span class="nav-text">Huawei LiteOS Kernel概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Huawei-LiteOS-Kernel的优势"><span class="nav-text">Huawei LiteOS Kernel的优势</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Huawei-LiteOS低功耗设计"><span class="nav-text">Huawei LiteOS低功耗设计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Huawei-LiteOS安全设计"><span class="nav-text">Huawei LiteOS安全设计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Huawei-LiteOS-Kernel概述-1"><span class="nav-text">Huawei LiteOS Kernel概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Huawei-LiteOS-Kernel任务模块—任务概述"><span class="nav-text">Huawei LiteOS Kernel任务模块—任务概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Huawei-LiteOS-Kernel任务模块—任务状态"><span class="nav-text">Huawei LiteOS Kernel任务模块—任务状态</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Huawei-LiteOS-Kernel内存模块—内存概述"><span class="nav-text">Huawei LiteOS Kernel内存模块—内存概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Huawei-LiteOS-Kernel硬件相关模块—中断概述"><span class="nav-text">Huawei LiteOS Kernel硬件相关模块—中断概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Huawei-LiteOS-Kernel硬件相关模块—中断运作机制"><span class="nav-text">Huawei LiteOS Kernel硬件相关模块—中断运作机制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Huawei-LiteOS-Kernel-IPC通信模块—队列概述"><span class="nav-text">Huawei LiteOS Kernel IPC通信模块—队列概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Huawei-LiteOS-Kernel-IPC通信模块—队列运作原理"><span class="nav-text">Huawei LiteOS Kernel IPC通信模块—队列运作原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Huawei-LiteOS-Kernel任务同步模块—互斥锁概述"><span class="nav-text">Huawei LiteOS Kernel任务同步模块—互斥锁概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Huawei-LiteOS-Kernel任务同步模块—信号量概述"><span class="nav-text">Huawei LiteOS Kernel任务同步模块—信号量概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Huawei-LiteOS-Kernel任务同步模块—信号量运作原理"><span class="nav-text">Huawei LiteOS Kernel任务同步模块—信号量运作原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Huawei-LiteOS-Kernel时间管理模块—时间管理概述"><span class="nav-text">Huawei LiteOS Kernel时间管理模块—时间管理概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Huawei-LiteOS-Kernel模块—双向链表"><span class="nav-text">Huawei LiteOS Kernel模块—双向链表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Huawei-LiteOS框架"><span class="nav-text">Huawei LiteOS框架</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#十一、华为HiLink平台"><span class="nav-text">十一、华为HiLink平台</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#华为HiLink-Wi-Fi模组优势"><span class="nav-text">华为HiLink Wi-Fi模组优势</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Artangnis(阿汤尼斯)</span>

  
</div>









<div class="powered-by">
<i class="fa fa-user-md"></i>
<span id="busuanzi_container_site_uv">
  本站总访客数:<span id="busuanzi_value_site_uv"></span>&nbsp;&nbsp;| 
</span>
<span id="busuanzi_container_site_pv">
    &nbsp;本站总访问量<span id="busuanzi_value_site_pv"></span>次
</span>
</div>
</div>

<script>
    var now = new Date(); 
    function createtime() { 
        var grt= new Date("03/12/2019 12:00:00");//此处修改你的建站时间或者网站上线时间 
        now.setTime(now.getTime()+250); 
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
        document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 "; 
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
    } 
setInterval("createtime()",250);
</script>

        







        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
